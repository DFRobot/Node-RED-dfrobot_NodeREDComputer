<script type="text/html" data-template-name="GPIO Out">
  <!-- 设置第一行为Name -->
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="lora.gpio.name"></span></label>
    <input type="text" id="node-input-name" data-i18n="[placeholder]lora.gpio.name">
</div>


<div class="form-row">
  <label for="node-input-pin"><i class="fa fa-circle"></i> Pin</label>
  <input type="text" id="node-input-pin">
</div>
<div class="form-row" id="node-set-tick">
  <label>&nbsp;</label>
  <input type="checkbox" id="node-input-set" style="display: inline-block; width: auto; vertical-align: top;">
  <label for="node-input-set" style="width: 70%;"><span data-i18n="lora.gpio_out.Level_Init"></span></label>
</div>
<div class="form-row" id="node-set-state">
  <label for="node-input-level">&nbsp;</label>
  <select id="node-input-level" style="width: 250px;">
      <option value="0">0 - 低电平</option>
      <option value="1">1 - 高电平</option>
  </select>
</div>

</script>



<script type="text/javascript">
    RED.nodes.registerType('GPIO Out',{
      category: 'NodeREDComputer',
      color: '#35c1f4',
      defaults: {
        name: {value:""},
        pin:  {value:"", required: true, validate: RED.validators.regex(/^[0-9]*$/)},
        set: { value:"" },
        level: { value:"0" }
      },
      inputs:1,
      outputs:0,
      icon: "font-awesome/fa-angle-double-right",
      label: function() {
        return this.name||this._("lora.gpio_out.Label_0_dragOut");
      },


      oneditprepare: function() {

            var setstate = function () {
                if ($('#node-input-set').is(":checked")) {
                    $("#node-set-state").show();
                } else {
                    $("#node-set-state").hide();
                }
            };
            $("#node-input-set").change(function () { setstate(); });
            setstate();
        }


    });
  </script>
  
